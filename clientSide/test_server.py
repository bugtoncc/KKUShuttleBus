from socketIO_client import SocketIO
import time
import datetime

#HOST = '10.42.0.1'
#HOST = '103.253.75.75'
HOST = '192.168.137.1'
PORT = 5000

delays = 0.1
busID = '1'

pos = ["16.47781926506258,102.8179607794957",
"16.47781517476184,102.8179793021959",
"16.4777906578912,102.8180903262899",
"16.47777841534776,102.8181457662394",
"16.47777463328892,102.8181835664968",
"16.47777391015377,102.8182075161904",
"16.47776677482114,102.8182398177081",
"16.47776401341885,102.8182729893844",
"16.47776227625067,102.8183015354937",
"16.47775855671952,102.8183391724944",
"16.47774743008052,102.8183896940248",
"16.47774035029986,102.8184218400871",
"16.47773327109177,102.8184539833348",
"16.47772518155744,102.8184907148202",
"16.47771810384327,102.8185228517322",
"16.4777163992688,102.8185513412204",
"16.47771165986566,102.8185936174922",
"16.47770894196885,102.8186267229453",
"16.47770085013744,102.8186634612897",
"16.47769914149364,102.8186919910468",
"16.47768801462708,102.8187425072636",
"16.47767891197801,102.8187838332267",
"16.47767318865899,102.8188307337947",
"16.47767516412607,102.8188843102783",
"16.47767343096725,102.8189758247086",
"16.47766333813688,102.8190218588518",
"16.477657280309,102.8190494888649",
"16.47765557876999,102.8190781906838",
"16.47765153793776,102.8190966230961",
"16.47764648596441,102.8191196680254",
"16.47764579082624,102.8191437959321",
"16.47764307304285,102.8191771655269",
"16.47764166179558,102.819225463542",
"16.4776304975999,102.8192761714996",
"16.47762440829061,102.8193038292592",
"16.47762369347412,102.8193279974699",
"16.47761760314543,102.8193556596131",
"16.47761485636468,102.8193890647734",
"16.47760978028622,102.8194121200708",
"16.47760598707744,102.8194500012211",
"16.47759885386773,102.8194821074188",
"16.47759274333367,102.8195096107709",
"16.47758663605625,102.8195370991604",
"16.4775858979411,102.819561168718",
"16.47758849245585,102.8195909963637",
"16.47759544091984,102.8196220217207",
"16.4775970196407,102.8196564536231",
"16.47759424374022,102.8196896902859",
"16.47758813434762,102.8197171373946",
"16.47758841394744,102.8197366398821",
"16.4775843427084,102.8197549267805",
"16.47757546670395,102.8198155426049",
"16.47757574567323,102.8198350386058",
"16.4775686296339,102.8198669884878",
"16.47756789202767,102.8198910428039",
"16.47756078066862,102.8199229645266",
"16.47755468893997,102.8199503098754",
"16.47754860050826,102.8199776402934",
"16.47754583497619,102.820010777214",
"16.47755174088522,102.8200464641421",
"16.47755765069979,102.8200821750408",
"16.47755792885487,102.8201016695647",
"16.47756254853327,102.8201224614466",
"16.47756079507721,102.8201510632709",
"16.4775580261421,102.8201842099856",
"16.47755525783134,102.8202173499972",
"16.47755553589589,102.8202368502341",
"16.47754944481748,102.8202641129835",
"16.47754898552603,102.8203076501177",
"16.47753985508705,102.820348499727",
"16.47753478577471,102.8203711797933",
"16.47752870569077,102.8203983821012",
"16.47752465416133,102.820416508788",
"16.47751554359204,102.820457269726",
"16.47751048527222,102.8204799004625",
"16.47750037566767,102.8205251311579",
"16.47749532427842,102.8205477310991",
"16.4774912848277,102.820565803753",
"16.47748421920695,102.8205974150875",
"16.47748493460214,102.8206471091755",
"16.47746713271626,102.8207283188055",
"16.47745851530195,102.8207876722486",
"16.47745259238362,102.8208146861918",
"16.47744371399429,102.8208551796503",
"16.47743977035013,102.820873165971",
"16.4774318874586,102.8209091192243",
"16.47742499458014,102.8209405567427",
"16.47742034441962,102.8209817729108",
"16.47742115465055,102.8210381139299",
"16.4774165232132,102.8210791796097",
"16.47741709653855,102.8211165180228",
"16.47741317135941,102.8211343674284",
"16.47740532243543,102.8211700596662",
"16.47739972015971,102.821215514835",
"16.47739089217955,102.8212556566904",
"16.47738724996492,102.8212922011389",
"16.47738556884584,102.8213198363123",
"16.4773838870671,102.8213474809118",
"16.47737309637903,102.8213965368262",
"16.47737239335877,102.8214197354273",
"16.47736552712007,102.8214509476479",
"16.47736384175297,102.8214786171472",
"16.47735991833701,102.821496451194",
"16.47735823170876,102.8215241315608",
"16.4773565445712,102.8215518214376",
"16.47736227811624,102.8215858802509",
"16.47736157223343,102.821609142482",
"16.47736184824664,102.8216279510021",
"16.47735917728371,102.8216601560457",
"16.47735230163537,102.8216913920898",
"16.47734542741257,102.8217226216091",
"16.47733953638559,102.8217493845499",
"16.47733462810652,102.8217716832475",
"16.47732873901233,102.8217984372045",
"16.47732285109742,102.8218251864296",
"16.47732213777488,102.8218484931723",
"16.47731946111896,102.8218807257854",
"16.47731776525774,102.82190850984",
"16.47731508697604,102.8219407625752",
"16.47731856730844,102.8219651575927",
"16.47731686991441,102.8219929777741",
"16.47731937025561,102.8220218811482",
"16.47731793884632,102.8220687754744",
"16.47731623800841,102.8220967305275",
"16.47731650514987,102.8221157437797",
"16.47730889117366,102.8221706561605",
"16.47730790584269,102.8221751429344",
"16.47730199228345,102.8222020689262",
"16.47730126829257,102.8222256334568",
"16.47730106755255,102.8222874430519",
"16.47729836655774,102.8223200779909",
"16.47729566309675,102.8223527423617",
"16.47728874348599,102.8223842734522",
"16.47728182106772,102.8224158169686",
"16.47727489591046,102.8224473729082",
"16.47726697815017,102.8224834520609",
"16.47726103754602,102.8225105220894",
"16.47725410416606,102.8225421153354",
"16.4772493937525,102.8225839685043",
"16.47724666234709,102.822616822482",
"16.47723872585949,102.8226529958611",
"16.47723177856005,102.8226846609733",
"16.47722383534663,102.8227208650194",
"16.47721588856322,102.8227570853607",
"16.47720893216917,102.822788791537",
"16.47720197300775,102.8228205103218",
"16.47719600588493,102.8228477078227",
"16.47719103170704,102.8228703793649",
"16.47719767579558,102.8229014916392",
"16.47720134263695,102.8229462992518",
"16.47720034597914,102.8229508453002",
"16.47720701198464,102.8229820952115",
"16.47720846887735,102.8230166270183",
"16.47720747073643,102.8230211827051",
"16.47720992785042,102.823051207858",
"16.47720493318162,102.8230740105239",
"16.47720416255134,102.8230981751683",
"16.477197164747,102.8231301274078",
"16.47719216467084,102.8231529579555",
"16.47718193960447,102.8231789858088",
"16.47717693704713,102.8232018246422",
"16.47716349636935,102.8232218926398",
"16.47715649011052,102.8232538700728",
"16.47715348668885,102.8232675785344"]

socket = SocketIO(HOST,PORT)
print ('connect to %s:%d' %(HOST,PORT))

i = 0
n = 1
while True:
	while True:
##		message = raw_input('-->')
		message = busID + "," + pos[i] + "," +  datetime.datetime.now().strftime("%H:%M:%S")
##		print (message + "   n = %d" %n)
		socket.emit('connector',message,)
		time.sleep(delays)
		i = i + 1
		n = n + 1
		if (i == len(pos)) :
			i = i - 1
			break
		if (n % 100 == 0) :
			socket = SocketIO(HOST,PORT)
##			print ('connect to %s:%d' %(HOST,PORT))
			n = 1

	while True:
		#message = raw_input('-->')
		message = busID + "," + pos[i] + "," + datetime.datetime.now().strftime("%H:%M:%S")
##		print (message + "   n = %d" %n)
		socket.emit('connector',message,)
		time.sleep(delays)
		i = i - 1
		n = n + 1
		if (i == 0) :
			break
		if (n % 100 == 0) :
			socket = SocketIO(HOST,PORT)
##			print ('connect to %s:%d' %(HOST,PORT))
			n = 1
